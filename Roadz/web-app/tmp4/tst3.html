<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>TouchScroll Demo</title>
	<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<link href="demo.css" rel="stylesheet">
	<link href="touchscroll.css" rel="stylesheet">
</head>
<body>

<!-- 	<div id="chrome"> -->
		<div id="demo">
			<div class="toolbar">
				<h1>TouchScroll Demo</h1>
			</div>

			<div class="scroller" id="about">

				<h2>Yet to be done</h2>

			</div>
			<div class="scroller" id="twodim">
				<h2>Yet to be done</h2>
			</div>

			<div class="scroller" id="config">
				<label>threshold: <input type="text" name="threshold"></label>
				<label>scrollHandleMinSize: <input type="text"
					name="scrollHandleMinSize"></label>
				<fieldset title="flicking">
					<legend>flicking</legend>
					<label>triggerThreshold: <input type="text"
						name="triggerThreshold"></label> <label>friction: <input
						type="text" name="friction"></label> <label>minSpeed: <input
						type="text" name="minSpeed"></label> <label>timingFunc: <input
						type="text" name="timingFunc"></label>
				</fieldset>

				<fieldset title="elasticity">
					<legend>elasticity</legend>
					<label>factorDrag: <input type="text" name="factorDrag"></label>
					<label>factorFlick: <input type="text" name="factorFlick"></label>
					<label>max: <input type="text" name="max"></label>
				</fieldset>

				<fieldset title="snapBack">
					<legend>snapBack</legend>
					<label>timingFunc: <input type="text" name="timingFunc"></label>
					<label>defaultTime: <input type="text" name="defaultTime"></label>
					<label>alwaysDefaultTime: <input type="checkbox"
						name="alwaysDefaultTime"></label>
				</fieldset>

			</div>

			<div class="tabs">
				<a href="#about" class="current">About</a> 
				<a href="#twodim">Full</a> <a href="#config">Config</a>
			</div>
		</div>
<!-- 	</div> -->

	<script src="touchscroll.min.js"></script>
	<script>
		(function() {
			var scrollers = {};

			function showScreen(screenId) {
				try {
					var activeScreen = document
							.querySelector("#demo .scroller#" + screenId);
				} catch (e) {
					return;
				}

				if (!activeScreen) {
					return;
				}

				Array.prototype.forEach.call(document
						.querySelectorAll("#demo .scroller"), function(screen) {
					screen.style.display = "none";
				});
				activeScreen.style.display = "block";

				scrollers[screenId].setupScroller(true);
			}

			Array.prototype.forEach.call(document
					.querySelectorAll("#demo .scroller"), function(scroller) {
				scrollers[scroller.id] = new TouchScroll(scroller, {
					elastic : true
				});
			});

			document.querySelector("#demo .tabs").addEventListener(
					"click",
					function(event) {
						var screenId = event.target.getAttribute("href");
						if (screenId) {
							showScreen(screenId.slice(1));

							Array.prototype.forEach.call(this.children,
									function(tab) {
										tab.className = "";
									});
							event.target.className = "current";
						}
					}, false);

			var hash = location.hash.slice(1);
			showScreen(hash || "about");
			tab = document.querySelector('#demo .tabs [href="' + location.hash
					+ '"]');
			if (tab) {
				Array.prototype.forEach.call(tab.parentNode.children, function(
						tab) {
					tab.className = "";
				});
				tab.className = "current";
			}

			function onConfigChange(evt) {
				var node = evt.target;
				if (node.nodeName.toLowerCase() != "input") {
					return
				}

				var value = node.value;
				var group = node.parentNode.parentNode;
				var curNamespace = (group.nodeName.toLowerCase() == "fieldset") ? TouchScroll.prototype.config[group.title]
						: TouchScroll.prototype.config;
				var valueName = node.name;
				// Parse value
				if (curNamespace[valueName] instanceof Array) { // Is it an array?
					curNamespace[valueName] = value.split(",").map(parseFloat);
				} else if (node.type == "checkbox") {
					curNamespace[valueName] = node.checked;
				} else {
					curNamespace[valueName] = parseFloat(value);
				}
			}

			document.querySelector("#config").addEventListener("keyup",
					onConfigChange, false);
			document.querySelector("#config").addEventListener("change",
					onConfigChange, false);

			//
			// Init config values
			//
			var configNode = document.getElementById("config");
			var inputNodes = document.querySelectorAll("input");
			for ( var i = 0, l = inputNodes.length, node; i < l; i++) {
				node = inputNodes[i];
				var group = node.parentNode.parentNode;
				var curNamespace = (group.nodeName.toLowerCase() == "fieldset") ? TouchScroll.prototype.config[group.title]
						: TouchScroll.prototype.config;
				if (node.type == "checkbox") {
					node.checked = curNamespace[node.name];
				} else {
					node.value = curNamespace[node.name];
				}
			}

		}())
	</script>

</body>
</html>
