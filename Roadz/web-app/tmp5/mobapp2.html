<html>
<head>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"/>
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<title>Mobile App</title>
	<link rel="stylesheet" type="text/css" href="../dojo-1.7.1/dojox/mobile/themes/iphone/base.css">
	<link rel="stylesheet" type="text/css" href="../dojo-1.7.1/dojox/mobile/themes/iphone/TabBar.css">
		<script type="text/javascript">
			
			var dojoConfig = (function(){
				var base = location.href.split("/");
				base.pop();
				base = base.join("/");
				
				return {
					async: true,
					isDebug: true,
					packages: [{
						name: "bywaze",
						location: base + "/../js/bywaze"
					}]
				};
			})();
			
		</script>
		<script src="../dojo-1.7.1/dojo/dojo.js"></script>
		<script>
		(function(){
			
			require(["dojox/mobile/parser", "dojox/mobile/TabBar", "bywaze/Friends", "bywaze/Contacts", "dojox/mobile/deviceTheme", "dojo/dom-attr", "dojo/_base/array", "dojox/mobile", "dojo/domReady!"], function(mobileParser, TabBar, Friends, Contacts, dm, domAttr, baseArray) {
				// Parse the page!
				mobileParser.parse();
			});
						
		})();
		</script>
	<script type="text/javascript" src="src.js"></script>
		<script>
		
			// Require the xhr module
			require(["dojo/_base/xhr", "dojo/on", "dojo/dom", "dojo/domReady!"],
				function(xhr, on, dom) {
					
					// Function that refreshes the SPAN node
					function refreshContent() {
						// Using xhr.get, as very little information is being sent
						xhr.get({
							// The URL of the request
							url: "http://localhost:8080/Roadz/user/friendsjson?username=maurice",
							// The success callback with result from server
							load: function(newContent) {
								dom.byId("contentNode").innerHTML = newContent;
							},
							// The error handler
							error: function() {
								// Do nothing -- keep old content there
							},
							// generate an extra GET variable to prevent browsers from caching
							preventCache: true
						});
					}
					
					// Populate content initially
					//refreshContent();
					
					// Connect button
					on(dom.byId("refreshButton"), "click", refreshContent);
					
			});
		</script>
</head>
<body style="visibility:hidden;">
		<h1 dojoType="dojox.mobile.Heading" fixed="top"
			label="Application Header Bar" back="Back" moveTo="back">
			<div dojoType="dojox.mobile.ToolBarButton" label="Edit"
				class="mblColorBlue" style="width: 25px; float: right;"></div>
		</h1>
		<div id="friends" data-dojo-type="bywaze.Friends" data-dojo-props="selected: true">
					<h1>Demo: Refresh a Node's Content</h1>

					<p>Click the button below to refresh the content.</p>

					<button id="refreshButton">Refresh Content</button>
					<br /><br />

					<p id="contentNode"></p>

		</div>
		<h1 dojoType="dojox.mobile.Heading" fixed="bottom">Application Footer Bar</h1>

</body>
</html>